(this["webpackJsonpreact-paint"]=this["webpackJsonpreact-paint"]||[]).push([[0],{204:function(e,t,n){},205:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(83),i=n.n(a),o=(n(94),n(8)),l=n(13),s=n.n(l),u=n(90),d=n(89),O=n(5),j=n(6),b={currentToolId:null,currentColor:null,entities:{}};function p(e,t){switch(t.type){case"UPDATE_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:t.payload.id,entities:Object(j.a)(Object(j.a)({},e.entities),{},Object(O.a)({},t.payload.id,Object(j.a)({},t.payload)))});case"SELECT_EXISTING_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:t.payload});case"CLEAR_CURRENT_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:null});case"UPDATE_COLOR":return Object(j.a)(Object(j.a)({},e),{},{currentColor:t.payload.hex});default:throw new Error("Unhandled type: ".concat(t.type))}}var f=n(4),y=r.a.createContext();function v(){return Object(c.useContext)(y)}function x(){var e=Object(c.useContext)(y),t=Object(o.a)(e,1)[0];if(t&&t.entities)return t.entities[t.currentToolId]}function h(e){var t=e.children,n=Object(c.useReducer)(p,b),r=Object(o.a)(n,2),a=r[0],i=r[1];return Object(f.jsx)(y.Provider,{value:[a,i],children:t})}n(204);var E={ref:null,strokeMode:"none",start:{x:null,y:null},end:{x:null,y:null}};function C(e,t){switch(t.type){case"SET_REF":return Object(j.a)(Object(j.a)({},e),{},{ref:t.payload});case"CLEAR_STROKE":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"none"});case"MOUSE_MOVE":return Object(j.a)(Object(j.a)({},e),{},{end:{x:t.payload.clientX-e.ref.current.offsetLeft,y:t.payload.clientY-e.ref.current.offsetTop}});case"MOUSE_UP":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"done"});case"MOUSE_DOWN":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"stroke",start:{x:t.payload.clientX-e.ref.current.offsetLeft,y:t.payload.clientY-e.ref.current.offsetTop}});default:throw new Error("Unhandled type: ".concat(t.type))}}var T=r.a.createContext(),L=r.a.createContext();function R(){return Object(c.useContext)(L)}function _(e){var t=e.children,n=Object(c.useState)({clientX:0,clientY:0}),r=Object(o.a)(n,2),a=r[0],i=r[1],l=Object(c.useReducer)(C,E),s=Object(o.a)(l,2),u=s[0],d=s[1],O=function(e){var t=e.clientX,n=e.clientY;d({type:"MOUSE_DOWN",payload:{clientX:t,clientY:n}})},j=function(e){var t=e.clientX,n=e.clientY;d({type:"MOUSE_UP",payload:{clientX:t,clientY:n}})},b=function(e){var t=e.clientX,n=e.clientY;i({clientX:t,clientY:n}),d({type:"MOUSE_MOVE",payload:{clientX:t,clientY:n}})};return Object(c.useEffect)((function(){return u.ref&&u.ref.current&&(u.ref.current.addEventListener("mousemove",b,{capture:!0}),u.ref.current.addEventListener("mousedown",O,{capture:!0}),u.ref.current.addEventListener("mouseup",j,{capture:!0})),function(){u.ref&&u.ref.current&&(u.ref.current.removeEventListener("mousemove",b),u.ref.current.removeEventListener("mousedown",O),u.ref.current.removeEventListener("mouseup",j))}}),[u.ref]),Object(f.jsx)(T.Provider,{value:[a.clientX,a.clientY],children:Object(f.jsx)(L.Provider,{value:[u,d],children:t})})}function m(){var e=R(),t=Object(o.a)(e,2),n=(t[0],t[1]),c=v(),r=Object(o.a)(c,2),a=(r[0],r[1]),i=x(),l=function(e){var t=Object(u.a)();a({type:"UPDATE_TOOL",payload:{id:t,type:e}}),n({type:"CLEAR_STROKE"})};return Object(f.jsxs)("div",{className:"toolbar-container",children:[Object(f.jsx)(d.a,{onChange:function(e,t){var n=e.hex,c=e.source;a({type:"UPDATE_COLOR",payload:{hex:n,source:c}})}}),Object(f.jsx)("div",{className:s()({active:i&&"Clear"===i.type}),onClick:function(e){a({type:"CLEAR_CURRENT_TOOL"})},children:"Clear"}),Object(f.jsx)("div",{className:s()({active:i&&"Arrow"===i.type}),onClick:function(e){a({type:"CLEAR_CURRENT_TOOL"})},children:"Arrow"}),Object(f.jsx)("div",{className:s()({active:i&&"Rect"===i.type}),onClick:function(e){l("Rect")},children:"Rect"}),Object(f.jsx)("div",{className:s()({active:i&&"Circle"===i.type}),onClick:function(){l("Circle")},children:"Circle"}),Object(f.jsx)("div",{className:s()({active:i&&"Line"===i.type}),onClick:function(){l("Line")},children:"Line"}),Object(f.jsx)("div",{className:s()({active:i&&"Ellipse"===i.type}),onClick:function(){l("Ellipse")},children:"Ellipse"}),Object(f.jsx)("div",{className:s()({active:i&&"Text"===i.type}),onClick:function(){l("Text")},children:"Text"}),Object(f.jsx)("div",{className:s()({active:i&&"Star"===i.type}),onClick:function(){l("Star")},children:"Star"})]})}n(205);var S=n(12),k=n(38);var N={Rect:S.e,Circle:S.a,Ellipse:S.b,Line:S.d,Text:S.g};function U(e){return Object(f.jsx)(f.Fragment,{children:function(){var t=N[e.type],n=e.selected?"black":"";return Object(f.jsx)(t,Object(j.a)(Object(j.a)({},e),{},{stroke:n,onDragEnd:function(t){return function(t,n){e.disabled||(t.evt.stopPropagation(),e.dispatch({type:"UPDATE_TOOL",payload:Object(j.a)(Object(j.a)({},n),{},{x:t.target.x(),y:t.target.y()})}),e.dispatch({type:"CLEAR_CURRENT_TOOL"}))}(t,e)},onClick:function(t){return function(t,n){e.disabled||(t.evt.stopPropagation(),e.dispatch({type:"SELECT_EXISTING_TOOL",payload:n.id}))}(t,e)}}))}()})}function g(){var e=Object(c.useRef)(),t=x(),n=v(),r=Object(o.a)(n,2),a=r[0],i=r[1],l=R(),s=Object(o.a)(l,2),u=s[0],d=s[1],O=Object(c.useState)(!1),b=Object(o.a)(O,2),p=b[0],y=b[1],h=u.strokeMode,E=u.start,C=u.end;return Object(c.useEffect)((function(){d({type:"SET_REF",payload:e})}),[]),Object(c.useEffect)((function(){if(t&&"stroke"===h){y(!1);var e={Rect:function(e,t){return{height:t.y-e.y,width:t.x-e.x}},Circle:function(e,t){return{radius:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},Ellipse:function(e,t){return{height:Math.abs(t.y-e.y),width:Math.abs(t.x-e.x)}},Line:function(e,t){return n.points||(n.points=[e.x,e.y]),{points:[].concat(Object(k.a)(n.points),[t.x,t.y]),stroke:"red"}}}[(n=t).type](E,C);i({type:"UPDATE_TOOL",payload:Object(j.a)(Object(j.a)(Object(j.a)({},t),e),{},{x:E.x,y:E.y,fill:a.currentColor})})}else"done"===h&&(y(!0),i({type:"CLEAR_CURRENT_TOOL"}));var n}),[h,C.x,C.y]),Object(f.jsxs)("div",{className:"paint-container",ref:e,children:[Object(f.jsx)(S.f,{width:800,height:500,children:Object(f.jsx)(S.c,{children:a.entities&&Object.values(a.entities).map((function(e){return Object(f.jsx)(U,Object(j.a)(Object(j.a)({},e),{},{draggable:p,disabled:!!t,selected:t&&e.id===t.id,dispatch:i}),JSON.stringify(e))}))})}),Object(f.jsx)("div",{children:t&&t.id})]})}var M=function(){return Object(f.jsx)(h,{children:Object(f.jsx)(_,{children:Object(f.jsxs)("div",{className:"paint-wrapper",children:[Object(f.jsx)(m,{}),Object(f.jsx)(g,{})]})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,209)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(M,{})}),document.getElementById("root")),w()},94:function(e,t,n){}},[[207,1,2]]]);
//# sourceMappingURL=main.04fa666f.chunk.js.map
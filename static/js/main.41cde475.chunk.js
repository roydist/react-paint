(this["webpackJsonpreact-paint"]=this["webpackJsonpreact-paint"]||[]).push([[0],{204:function(e,t,n){},205:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(84),i=n.n(a),o=(n(94),n(8)),l=n(13),s=n.n(l),u=n(39),d=n(90),O=n(5),j=n(6),b={currentToolId:null,currentColor:null,entities:{}};function f(e,t){switch(t.type){case"UPDATE_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:t.payload.id,entities:Object(j.a)(Object(j.a)({},e.entities),{},Object(O.a)({},t.payload.id,Object(j.a)({},t.payload)))});case"SELECT_EXISTING_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:t.payload});case"CLEAR_CURRENT_TOOL":return Object(j.a)(Object(j.a)({},e),{},{currentToolId:null});case"UPDATE_COLOR":return Object(j.a)(Object(j.a)({},e),{},{currentColor:t.payload.hex});default:throw new Error("Unhandled type: ".concat(t.type))}}var p=n(4),y=r.a.createContext();function v(){return Object(c.useContext)(y)}function x(){var e=Object(c.useContext)(y),t=Object(o.a)(e,1)[0];if(t&&t.entities)return t.entities[t.currentToolId]}function h(e){var t=e.children,n=Object(c.useReducer)(f,b),r=Object(o.a)(n,2),a=r[0],i=r[1];return Object(p.jsx)(y.Provider,{value:[a,i],children:t})}n(204);function E(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];clearTimeout(t),t=setTimeout((function(){e.apply(null,r)}),n)}}var T={ref:null,strokeMode:"none",start:{x:null,y:null},end:{x:null,y:null}};function C(e,t){switch(t.type){case"SET_REF":return Object(j.a)(Object(j.a)({},e),{},{ref:t.payload});case"CLEAR_STROKE":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"none"});case"MOUSE_MOVE":return Object(j.a)(Object(j.a)({},e),{},{end:{x:t.payload.clientX-e.ref.current.offsetLeft,y:t.payload.clientY-e.ref.current.offsetTop}});case"MOUSE_UP":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"done"});case"MOUSE_DOWN":return Object(j.a)(Object(j.a)({},e),{},{strokeMode:"stroke",start:{x:t.payload.clientX-e.ref.current.offsetLeft,y:t.payload.clientY-e.ref.current.offsetTop}});default:throw new Error("Unhandled type: ".concat(t.type))}}var L=r.a.createContext(),m=r.a.createContext();function _(){return Object(c.useContext)(m)}function R(e){var t=e.children,n=Object(c.useState)({clientX:0,clientY:0}),r=Object(o.a)(n,2),a=r[0],i=r[1],l=Object(c.useReducer)(C,T),s=Object(o.a)(l,2),u=s[0],d=s[1],O=function(e){var t=e.clientX,n=e.clientY;E(d({type:"MOUSE_DOWN",payload:{clientX:t,clientY:n}}))},j=function(e){var t=e.clientX,n=e.clientY;E(d({type:"MOUSE_UP",payload:{clientX:t,clientY:n}}))},b=function(e){var t=e.clientX,n=e.clientY;E(i({clientX:t,clientY:n})),d({type:"MOUSE_MOVE",payload:{clientX:t,clientY:n}})};return Object(c.useEffect)((function(){return u.ref&&u.ref.current&&(u.ref.current.addEventListener("mousemove",b,{capture:!0}),u.ref.current.addEventListener("mousedown",O,{capture:!0}),u.ref.current.addEventListener("mouseup",j,{capture:!0})),function(){u.ref&&u.ref.current&&(u.ref.current.removeEventListener("mousemove",b),u.ref.current.removeEventListener("mousedown",O),u.ref.current.removeEventListener("mouseup",j))}}),[u.ref]),Object(p.jsx)(L.Provider,{value:[a.clientX,a.clientY],children:Object(p.jsx)(m.Provider,{value:[u,d],children:t})})}function S(){var e=_(),t=Object(o.a)(e,2),n=(t[0],t[1]),c=v(),r=Object(o.a)(c,2),a=(r[0],r[1]),i=x(),l=function(e){var t=Object(u.a)();a({type:"UPDATE_TOOL",payload:{id:t,type:e}}),n({type:"CLEAR_STROKE"})};return Object(p.jsxs)("div",{className:"toolbar-container",children:[Object(p.jsx)(d.a,{onChange:function(e,t){var n=e.hex,c=e.source;a({type:"UPDATE_COLOR",payload:{hex:n,source:c}})}}),Object(p.jsx)("div",{className:s()({active:i&&"Clear"===i.type}),onClick:function(e){a({type:"CLEAR_CURRENT_TOOL"})},children:"Clear"}),Object(p.jsx)("div",{className:s()({active:i&&"Arrow"===i.type}),onClick:function(e){l("Arrow")},children:"Arrow"}),Object(p.jsx)("div",{className:s()({active:i&&"Rect"===i.type}),onClick:function(e){l("Rect")},children:"Rect"}),Object(p.jsx)("div",{className:s()({active:i&&"Circle"===i.type}),onClick:function(){l("Circle")},children:"Circle"}),Object(p.jsx)("div",{className:s()({active:i&&"Line"===i.type}),onClick:function(){l("Line")},children:"Line"}),Object(p.jsx)("div",{className:s()({active:i&&"Ellipse"===i.type}),onClick:function(){l("Ellipse")},children:"Ellipse"}),Object(p.jsx)("div",{className:s()({active:i&&"Text"===i.type}),onClick:function(){l("Text")},children:"Text"}),Object(p.jsx)("div",{className:s()({active:i&&"Star"===i.type}),onClick:function(){l("Star")},children:"Star"})]})}n(205);var g=n(11),w=n(38);var U={Rect:g.f,Circle:g.b,Ellipse:g.c,Line:g.e,Text:g.h,Arrow:g.a};function k(e){return Object(p.jsx)(p.Fragment,{children:function(){var t=U[e.type];return Object(p.jsx)(t,Object(j.a)(Object(j.a)({},e),{},{onDragEnd:function(t){return function(t,n){e.disabled||(t.evt.stopPropagation(),e.dispatch({type:"UPDATE_TOOL",payload:Object(j.a)(Object(j.a)({},n),{},{x:t.target.x(),y:t.target.y()})}),e.dispatch({type:"CLEAR_CURRENT_TOOL"}))}(t,e)},onClick:function(t){return function(t,n){e.disabled||(t.evt.stopPropagation(),e.dispatch({type:"SELECT_EXISTING_TOOL",payload:n.id}))}(t,e)}}))}()})}n(207);function A(){var e=Object(c.useRef)(),t=x(),n=v(),r=Object(o.a)(n,2),a=r[0],i=r[1],l=_(),s=Object(o.a)(l,2),d=s[0],O=s[1],b=Object(c.useState)(!1),f=Object(o.a)(b,2),y=f[0],h=f[1],E=d.strokeMode,T=d.start,C=d.end;return Object(c.useEffect)((function(){O({type:"SET_REF",payload:e})}),[]),Object(c.useEffect)((function(){if(t&&"Arrow"!==t.type&&"stroke"===E){h(!1);var e={Rect:function(e,t){return{x:e.x,y:e.y,height:t.y-e.y,width:t.x-e.x}},Circle:function(e,t){return{x:e.x,y:e.y,radius:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},Ellipse:function(e,t){return{x:e.x,y:e.y,height:Math.abs(t.y-e.y),width:Math.abs(t.x-e.x)}},Line:function(e,t){return c.points||(c.points=[e.x,e.y]),{points:[].concat(Object(w.a)(c.points),[t.x,t.y])}}}[(c=t).type](T,C);i({type:"UPDATE_TOOL",payload:Object(j.a)(Object(j.a)(Object(j.a)({},t),e),{},{stroke:a.currentColor,fill:a.currentColor})})}else if("done"===E){h(!0);var n=Object(u.a)();i({type:"UPDATE_TOOL",payload:{id:n,type:t.type}}),O({type:"CLEAR_STROKE"})}var c}),[E,C.x,C.y]),Object(p.jsxs)("div",{className:"canvas-container",ref:e,children:[Object(p.jsx)(g.g,{width:1024,height:768,children:Object(p.jsx)(g.d,{children:a.entities&&Object.values(a.entities).map((function(e){return Object(p.jsx)(k,Object(j.a)(Object(j.a)({},e),{},{draggable:y,disabled:!!t,selected:t&&e.id===t.id,dispatch:i}),JSON.stringify(e))}))})}),Object(p.jsx)("div",{children:t&&t.id})]})}var M=function(){return Object(p.jsx)(h,{children:Object(p.jsx)(R,{children:Object(p.jsxs)("div",{className:"paint-wrapper",children:[Object(p.jsx)(S,{}),Object(p.jsx)(A,{})]})})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),N()},94:function(e,t,n){}},[[208,1,2]]]);
//# sourceMappingURL=main.41cde475.chunk.js.map